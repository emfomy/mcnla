////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// @file    include/isvd/matrix/matrix_base.ipp
/// @brief   The implementation of matrix base interface.
///
/// @author  Mu Yang <emfomy@gmail.com>
///

#ifndef ISVD_MATRIX_MATRIX_BASE_IPP_
#define ISVD_MATRIX_MATRIX_BASE_IPP_

#include <isvd/matrix/matrix.hpp>

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//  The iSVD namespace.
//
namespace isvd {

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//  The implementation namespace.
//
namespace impl {

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Default constructor.
///
template <class _Data>
MatrixBase<_Data>::MatrixBase() noexcept
  : data_(new _Data()) {}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Copy constructor.
///
template <class _Data>
MatrixBase<_Data>::MatrixBase(
    const MatrixBase &other
) noexcept
  : data_(other.data_) {}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Construct with given data.
///
template <class _Data>
MatrixBase<_Data>::MatrixBase( _Data *data ) noexcept
  : data_(data) {}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Default destructor.
///
template <class _Data>
MatrixBase<_Data>::~MatrixBase() noexcept {}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Copy assignment operator.
///
template <class _Data>
MatrixBase<_Data>& MatrixBase<_Data>::operator=(
    const MatrixBase &other
) noexcept {
  data_ = other.data_;
  return *this;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Gets the number of rows.
///
template <class _Data>
index_t MatrixBase<_Data>::getNrow() const noexcept {
  return data_->getNrow();
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Gets the number of columns.
///
template <class _Data>
index_t MatrixBase<_Data>::getNcol() const noexcept {
  return data_->getNcol();
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Gets the data storage
///
template <class _Data>
_Data* MatrixBase<_Data>::getData() const noexcept {
  return data_.get();
}

}  // namespace impl

}  // namespace isvd

#endif  // ISVD_MATRIX_MATRIX_BASE_IPP_
